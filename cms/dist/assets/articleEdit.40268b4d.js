var x=Object.defineProperty;var y=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var b=(o,t,l)=>t in o?x(o,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):o[t]=l,F=(o,t)=>{for(var l in t||(t={}))D.call(t,l)&&b(o,l,t[l]);if(y)for(var l of y(t))S.call(t,l)&&b(o,l,t[l]);return o};import{j as U,l as h,u as L,k as M,a8 as N,L as q,K as z,M as P,W as R,a5 as T,a6 as G,a9 as K,r as O,X as W,o as p,t as f,B as m,v as r,x as i,G as v,F as X,c as B,U as H,y as J,z as Q,A as E,p as Y,q as Z}from"./vendor.acb92e5d.js";/* empty css                     *//* empty css                  *//* empty css                 *//* empty css                     *//* empty css                  *//* empty css               *//* empty css                  */import{_ as ee}from"./index.98466bb9.js";const te=o=>(J("data-v-2b5a23dc"),o=o(),Q(),o),ae=te(()=>m("div",{class:"header-tools-view"},[m("p",{class:"main-title"},"\u6587\u7AE0\u7F16\u8F91")],-1)),le={class:"forms-view"},oe={class:"forms-btns-view"},ue=E("\u66F4\u65B0\u6587\u7AE0"),se=E("\u4FDD\u5B58\u5E76\u53D1\u5E03"),ne=E("\u4FDD\u5B58\u4E3A\u8349\u7A3F"),re=U({setup(o){const{proxy:t}=h(),l=L(),V=M(),g=N(),u=q({}),k=z(()=>l.state.article.types),c=async(d,e)=>{let s=F({},u.value);if(!s.title||!s.type||!s.content)return t.$toast("\u8BF7\u5C06\u4FE1\u606F\u586B\u5199\u5B8C\u6210~");let n=null;s._id?n=await t.$api_loading.put("/article/edit",s):(s.publish=d,n=await t.$api_loading.post("/article/create",s)),!!n&&(t.$toast(n.message,"success"),!e&&V.replace("/content/article"))},$=async(d,e)=>{let s=new FormData;s.append("file",e);const n=await t.$api.post("/system/upload",s);!n||t.$refs.md.$img2Url(d,n.data)};return P(async()=>{l.dispatch("article/getTypesList");const d=g.query.articleId;if(d){const e=await t.$api_loading.get(`/article/detail/${d}`);if(!e)return;u.value=e.data}}),(d,e)=>{const s=Y,n=R,C=T,w=G,A=K,I=O("mavon-editor"),_=Z,j=W;return p(),f(v,null,[ae,m("div",le,[r(j,{model:u.value,"label-width":"50px"},{default:i(()=>[r(n,{label:"\u6807\u9898"},{default:i(()=>[r(s,{modelValue:u.value.title,"onUpdate:modelValue":e[0]||(e[0]=a=>u.value.title=a),modelModifiers:{trim:!0},placeholder:"\u8BF7\u8F93\u5165\u6587\u7AE0\u6807\u9898"},null,8,["modelValue"])]),_:1}),r(n,{label:"\u5206\u7C7B"},{default:i(()=>[r(w,{modelValue:u.value.type,"onUpdate:modelValue":e[1]||(e[1]=a=>u.value.type=a),placeholder:"\u9009\u62E9\u6587\u7AE0\u5206\u7C7B"},{default:i(()=>[(p(!0),f(v,null,X(H(k),a=>(p(),B(C,{key:a._id,label:a.name,value:a._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(n,{label:"\u65E5\u671F"},{default:i(()=>[r(A,{modelValue:u.value.createAt,"onUpdate:modelValue":e[2]||(e[2]=a=>u.value.createAt=a),type:"date",placeholder:"\u9009\u62E9\u6587\u7AE0\u53D1\u5E03\u65E5\u671F"},null,8,["modelValue"])]),_:1}),r(I,{modelValue:u.value.content,"onUpdate:modelValue":e[3]||(e[3]=a=>u.value.content=a),tabSize:2,html:!1,onSave:e[4]||(e[4]=a=>c(0,!0)),ref:"md",onImgAdd:$},null,8,["modelValue"]),m("div",oe,[u.value._id?(p(),B(_,{key:0,type:"primary",onClick:e[5]||(e[5]=a=>c())},{default:i(()=>[ue]),_:1})):(p(),f(v,{key:1},[r(_,{type:"primary",onClick:e[6]||(e[6]=a=>c(1))},{default:i(()=>[se]),_:1}),r(_,{type:"info",onClick:e[7]||(e[7]=a=>c())},{default:i(()=>[ne]),_:1})],64))])]),_:1},8,["model"])])],64)}}});var be=ee(re,[["__scopeId","data-v-2b5a23dc"]]);export{be as default};

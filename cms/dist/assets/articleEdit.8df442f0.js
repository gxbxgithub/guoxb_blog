var j=Object.defineProperty;var y=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var B=(s,t,o)=>t in s?j(s,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[t]=o,F=(s,t)=>{for(var o in t||(t={}))D.call(t,o)&&B(s,o,t[o]);if(y)for(var o of y(t))U.call(t,o)&&B(s,o,t[o]);return s};import{j as S,l as h,u as L,k as M,a8 as N,L as q,K as z,M as P,W as R,a5 as T,a6 as G,a9 as K,r as O,X as W,o as p,t as f,B as c,v as r,x as d,G as v,F as X,c as V,U as H,y as J,z as Q,A as E,p as Y,q as Z}from"./vendor.acb92e5d.js";/* empty css                     *//* empty css                  *//* empty css                 *//* empty css                     *//* empty css                  *//* empty css               *//* empty css                  */import{_ as ee}from"./index.aaf865c4.js";const te=s=>(J("data-v-4d21cd97"),s=s(),Q(),s),le=te(()=>c("div",{class:"header-tools-view"},[c("p",{class:"main-title"},"\u6587\u7AE0\u7F16\u8F91")],-1)),ae={class:"forms-view"},oe={class:"forms-btns-view"},ue=E("\u66F4\u65B0\u6587\u7AE0"),se=E("\u4FDD\u5B58\u5E76\u53D1\u5E03"),ne=E("\u4FDD\u5B58\u4E3A\u8349\u7A3F"),re=S({setup(s){const{proxy:t}=h(),o=L(),b=M(),C=N(),a=q({}),g=z(()=>o.state.article.types),m=async(i,e)=>{let u=F({},a.value);if(!u.title||!u.type||!u.content)return t.$toast("\u8BF7\u5C06\u4FE1\u606F\u586B\u5199\u5B8C\u6210~");let n=null;u._id?n=await t.$api_loading.put("/article/edit",u):(u.publish=i,n=await t.$api_loading.post("/article/create",u)),!!n&&(t.$toast(n.message,"success"),!e&&b.replace("/content/article"))},k=async(i,e)=>{let u=new FormData;u.append("file",e);const n=await t.$api.post("/system/upload",u);!n||t.$refs.md.$img2Url(i,n.data)};return P(async()=>{o.dispatch("article/getTypesList");const i=C.query.articleId;if(i){const e=await t.$api_loading.get(`/article/detail/${i}`);if(!e)return;a.value=e.data}}),(i,e)=>{const u=Y,n=R,$=T,w=G,A=K,x=O("mavon-editor"),_=Z,I=W;return p(),f(v,null,[le,c("div",ae,[r(I,{model:a.value,"label-width":"50px"},{default:d(()=>[r(n,{label:"\u6807\u9898"},{default:d(()=>[r(u,{modelValue:a.value.title,"onUpdate:modelValue":e[0]||(e[0]=l=>a.value.title=l),modelModifiers:{trim:!0},placeholder:"\u8BF7\u8F93\u5165\u6587\u7AE0\u6807\u9898"},null,8,["modelValue"])]),_:1}),r(n,{label:"\u5206\u7C7B"},{default:d(()=>[r(w,{modelValue:a.value.type,"onUpdate:modelValue":e[1]||(e[1]=l=>a.value.type=l),placeholder:"\u9009\u62E9\u6587\u7AE0\u5206\u7C7B"},{default:d(()=>[(p(!0),f(v,null,X(H(g),l=>(p(),V($,{key:l._id,label:l.name,value:l._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(n,{label:"\u65E5\u671F"},{default:d(()=>[r(A,{modelValue:a.value.createAt,"onUpdate:modelValue":e[2]||(e[2]=l=>a.value.createAt=l),type:"date",placeholder:"\u9009\u62E9\u6587\u7AE0\u53D1\u5E03\u65E5\u671F"},null,8,["modelValue"])]),_:1}),r(n,{label:"\u7B80\u4ECB"},{default:d(()=>[r(u,{modelValue:a.value.intro,"onUpdate:modelValue":e[3]||(e[3]=l=>a.value.intro=l),type:"textarea",placeholder:"\u8BF7\u8F93\u5165\u6587\u7AE0\u7B80\u4ECB",rows:3},null,8,["modelValue"])]),_:1}),r(x,{modelValue:a.value.content,"onUpdate:modelValue":e[4]||(e[4]=l=>a.value.content=l),tabSize:2,html:!1,onSave:e[5]||(e[5]=l=>m(0,!0)),ref:"md",onImgAdd:k},null,8,["modelValue"]),c("div",oe,[a.value._id?(p(),V(_,{key:0,type:"primary",onClick:e[6]||(e[6]=l=>m())},{default:d(()=>[ue]),_:1})):(p(),f(v,{key:1},[r(_,{type:"primary",onClick:e[7]||(e[7]=l=>m(1))},{default:d(()=>[se]),_:1}),r(_,{type:"info",onClick:e[8]||(e[8]=l=>m())},{default:d(()=>[ne]),_:1})],64))])]),_:1},8,["model"])])],64)}}});var Be=ee(re,[["__scopeId","data-v-4d21cd97"]]);export{Be as default};
